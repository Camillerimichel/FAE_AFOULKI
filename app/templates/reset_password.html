{% extends "base.html" %}

{% block title %}Nouveau mot de passe{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto">
    <div class="text-center mb-6">
        <p class="text-sm uppercase tracking-[0.2em] text-[#F2932B] font-semibold">Acces</p>
        <h2 class="font-display text-3xl">Definir un nouveau mot de passe</h2>
        <p class="text-slate-600 text-sm mt-1">Choisissez un mot de passe pour votre compte.</p>
    </div>

    {% if not token_valid %}
        <div class="bg-white/95 border border-[#F2932B1f] shadow-soft rounded-2xl p-6">
            <p class="text-red-600 text-sm">Lien invalide ou expire.</p>
            <div class="mt-4">
                <a href="/auth/forgot-password" class="text-sm text-[#F2932B] font-semibold hover:underline">Demander un nouveau lien</a>
            </div>
        </div>
    {% else %}
        <form method="post" action="/auth/reset-password" class="bg-white/95 border border-[#F2932B1f] shadow-soft rounded-2xl p-6 space-y-4">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="space-y-1">
                <label class="text-sm font-semibold text-slate-700">Nouveau mot de passe</label>
                <input type="password" name="password" required class="w-full px-4 py-3 rounded-xl border border-[#F2932B1f] focus:ring-2 focus:ring-[#F2932B33] focus:outline-none" placeholder="••••••••">
            </div>
            <div class="space-y-1">
                <label class="text-sm font-semibold text-slate-700">Confirmer le mot de passe</label>
                <input type="password" name="password_confirm" required class="w-full px-4 py-3 rounded-xl border border-[#F2932B1f] focus:ring-2 focus:ring-[#F2932B33] focus:outline-none" placeholder="••••••••">
            </div>

            {% if error %}
                <p class="text-red-600 text-sm">{{ error }}</p>
            {% endif %}

            <button type="submit" class="w-full inline-flex justify-center items-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-[#F2932B] to-[#4969A4] text-white font-semibold shadow-2xl shadow-[rgba(73,105,164,0.35)] hover:-translate-y-0.5 transition">
                Enregistrer
            </button>
        </form>
    {% endif %}

    <div class="text-center mt-4">
        <a href="/auth/login" class="text-sm text-[#F2932B] font-semibold hover:underline">Retour a la connexion</a>
    </div>
</div>
{% endblock %}
